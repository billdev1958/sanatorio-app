# Imagen base con Go y herramientas de desarrollo
FROM golang:1.24.0 AS dev

# Establecer el directorio de trabajo
WORKDIR /app

# Instalar Air para hot reload
RUN go install github.com/air-verse/air@latest

# Copiar dependencias primero (para aprovechar la caché)
COPY go.mod go.sum ./
RUN go mod download

# Copiar el código fuente
COPY . .

# Comando de desarrollo con hot reload
CMD ["air"]
